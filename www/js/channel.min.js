(()=>{var e={225:e=>{const t=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];class s{static requireNonNull(e,t){if(!this.isDefined(e))throw new Error(`Null or undefined value not allowed for ${t}`);return e}static ofNullable(e,t){return this.isDefined(e)||(e=s.requireNonNull(t,"defaultValue")),e}static isDefined(e){return null!=e}static isEmptyOrWhitespace(e){return!this.isDefined(e)||"string"==typeof e&&e.constructor===String&&0===e.toString().trim().length}}class i extends Map{clone(){const e=new i;return this.forEach(((t,s)=>e.set(s,t))),e}}class r{constructor(e,t,i){if(this._node=null,this._hNode=null,this._isCached=!1,s.requireNonNull(e,"tagName in TagBuilder"),e=e.trim().toLowerCase(),"headless"!==o.mode){if(s.isEmptyOrWhitespace(i)){const t=document.createElement(e);t.contentEditable="inherit",t.draggable=!1,this.node=t}else{const t=document.createElementNS(i,e);this.node=t}if(!s.isEmptyOrWhitespace(t)){if(null!==document.querySelector(`#${t}`))throw new Error(`Tag with '${t}' id already exists in the document tree`);this.node.id=t}}else this.hNode=this.headlessBuilder(e,t,i)}attr(e,t){return this.isHeadlessMode?this.hNode.attr(e,t):this.node.setAttribute(e,`${t}`),this}slot(e){return this.isHeadlessMode?this.hNode.attr("slot",e):this.node.slot=e,this}tabIndex(e){return this.isHeadlessMode?this.hNode.attr("tabindex",e):this.node.tabIndex=e,this}append(...e){return 0===(e=e.filter((e=>s.isDefined(e)))).length?this:this.isHeadlessMode?(this.hNode.append(...e.map((e=>e instanceof r?e.buildHTML():e))),this):(this.node.append(...e.map((e=>e instanceof r?e.build():e))),this)}prepend(...e){return 0===(e=e.filter((e=>s.isDefined(e)))).length?this:this.isHeadlessMode?(this.hNode.prepend(...e.map((e=>e instanceof r?e.buildHTML():e))),this):(this.node.prepend(...e.map((e=>e instanceof r?e.build():e))),this)}insertAdjacent(e,t="after"){return this.isHeadlessMode?this.hNode.insertAdjacent(e.buildHTML(),"before"===t?"before":"after"):this.node.insertAdjacentElement("before"===t?"beforebegin":"afterend",e.build()),this}innerHTML(e){return this.isHeadlessMode?this.hNode.innerHTML(e):this.node.innerHTML=e,this}classes(...e){if(!Array.isArray(e))throw new Error(`Invalid datatype for classes. Got '${typeof e}' expecting array of strings for node: [type = '${this.node.nodeType}', tagName = '${this.node.tagName}']`);return this.isHeadlessMode?(this.hNode.classes(e),this):(e.forEach((e=>{if("string"!=typeof e||e.constructor!==String)throw new Error(`Invalid datatype for class name. Got '${typeof e}' expecting string for node: [type = '${this.node.nodeType}', tagName = '${this.node.tagName}']`);this.node.classList.contains(e)||this.node.classList.add(e)})),this)}margin(...e){return e.length>4||0===e.length||this.style({margin:e.join(" ")}),this}origin(e,t,i,r){return s.isEmptyOrWhitespace(e)||this.style({top:e}),s.isEmptyOrWhitespace(t)||this.style({right:t}),s.isEmptyOrWhitespace(i)||this.style({bottom:i}),s.isEmptyOrWhitespace(r)||this.style({left:r}),this}padding(...e){return e.length>4||0===e.length||this.style({padding:e.join(" ")}),this}position(e){return this.style({position:e}),this}style(e){for(const[t,i]of Object.entries(e))"undefined"!==t&&"null"!==t&&s.isDefined(i)&&(this.isHeadlessMode?this.hNode.style(t,i):window.CSS.supports(t,i.toString())?this.node.style[t]=i.toString():console.debug(`Entry/value is not supported => ${t} : ${i}`));return this}on(e,t,s){return this.isHeadlessMode?this.hNode.attr(`on${e}`.toLowerCase(),t):this.node.addEventListener(e,t,s),this}build(){return this.node}buildHTML(){return this.isHeadlessMode?this.hNode.build():this.build().outerHTML}get isSVGElement(){return this.node instanceof SVGElement}get isCached(){return this._isCached}set isCached(e){this._isCached=e}get node(){return this._node}set node(e){this._node=e}get hNode(){return this._hNode}set hNode(e){this._hNode=e}get tagName(){return this.isHeadlessMode?this.hNode.tagName().toUpperCase():this.node.tagName}get tagId(){return this.isHeadlessMode?this.hNode.tagId():this.node.id}get isHeadlessMode(){return"headless"===o.mode||s.isDefined(this.hNode)}headlessBuilder(e,r,n){class o{constructor(e,t){this._attrs=new i,this._children=[],this._siblings=new i([["before",[]],["after",[]]]),this._styles=new i,this._tagName=e,s.isEmptyOrWhitespace(t)||this.attrs.set("id",t),s.isEmptyOrWhitespace(n)?this.attrs.set("draggable",!1):this.attrs.set("xmlns",n),this.attrs.set("class",new Set)}get tagName(){return this._tagName}get attrs(){return this._attrs}get children(){return this._children}get siblings(){return this._siblings}get styles(){return this._styles}get classes(){return this.attrs.get("class")}static from(e){const t=new o(e._tagName,e.attrs.get("id"));return t._attrs=e.attrs.clone(),t._children=[...e._children],t._siblings=e._siblings.clone(),t._styles=e._styles.clone(),t}}const d=function(e,i,r){let n=new o(e,i);return null!=r&&(n=o.from(r)),{attr:function(e,t){return n.attrs.set(e,`${t}`),this},append:function(...e){return n.children.push(...e),this},prepend:function(...e){return n.children.unshift(...e),this},insertAdjacent:function(e,t){return n.siblings.get(t).push(e),this},innerHTML:function(e){return n.children.splice(0,n.children.length,e),this},classes:function(t){return t.forEach((t=>{if("string"!=typeof t||t.constructor!==String)throw new Error(`Invalid datatype for class name. Got '${typeof t}' expecting string for node: [tagName = '${e}']`);n.classes.add(t.trim())})),this},style:function(e,t){return s.isDefined(e)&&s.isDefined(t)?(n.styles.set(e,`${t}`),this):this},tagName:()=>n.tagName,tagId:()=>{var e;return null!=(e=n.attrs.get("id"))?e:null},clone:function(){return d(e,i,n)},build:()=>{let i="";if(n.attrs.forEach(((e,t)=>{"class"!==t.trim()?(e=s.isEmptyOrWhitespace(e)?"":e,i+=` ${t}="${e}"`):e.size>0&&(i+=` class="${[...e].join(" ")}"`)})),n.styles.size>0){i+=' style="';let e="";n.styles.forEach(((t,i)=>{t=s.isEmptyOrWhitespace(t)?"":t,e+=` ${i.trim()}: ${t.trim()};`})),i+=`${e.trim()}"`}return t.includes(e)?`<${e}${i}>`:n.siblings.get("before").join()+`<${e}${i}>`+(0===n.children.length?"":n.children.join(""))+`</${e}>`+n.siblings.get("after").join()}}};return d(e,r)}}class n extends r{constructor(e,t){super(e,t)}accessKey(e){return this.isHeadlessMode?this.hNode.attr("accesskey",e):this.node.accessKey=e.trim(),this}inputMode(e="text"){return e=s.ofNullable(e,"text"),this.isHeadlessMode?this.hNode.attr("inputmode",e):this.node.inputMode=e,this}contentEditable(){return this.isHeadlessMode?this.hNode.attr("contenteditable",!0):this.node.contentEditable="true",this}dir(e){return this.isHeadlessMode?this.hNode.attr("dir",e):this.node.dir=e,this}draggable(){return this.isHeadlessMode?this.hNode.attr("draggable",!0):this.node.draggable=!0,this}hidden(){return this.isHeadlessMode?this.hNode.attr("hidden",!0):this.node.hidden=!0,this}spellcheck(){return this.isHeadlessMode?this.hNode.attr("spellcheck",!0):this.node.spellcheck=!0,this}title(e){return this.isHeadlessMode?this.hNode.attr("title",e):this.node.title=e,this}innerText(e){return this.isHeadlessMode?this.hNode.innerHTML(e):this.node.innerText=e,this}autocapitalize(e){return this.isHeadlessMode?this.hNode.attr("autocapitalize",e):this.node.autocapitalize=e,this}bounds(e,t){return this.style({width:e,height:t}),this}caret(e){return this.style({"caret-color":e}),this}height(e){return this.style({height:e}),this}textcase(e){return["uppercase","lowercase","none","capitalize","inherit"].includes(e)&&this.style({"text-transform":e}),this}visibility(e){return this.style({visibility:e}),this}width(e){return this.style({width:e}),this}screenReaderOnly(){return this.style({border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px"}),this}clone(){const e=new n(this.tagName,this.tagId);return e.isCached=this.isCached,this.isHeadlessMode?e.hNode=this.hNode.clone():e.node=this.node.cloneNode(!0),e}static parse(e){if("headless"===o.mode)throw new Error("Parse is not supported in headless mode");const t=document.createElement("template");t.innerHTML=e;const s=t.content.childNodes;if(0===s.length)return null;const i=[...s].filter((e=>1===e.nodeType)).map((e=>{const t=new n(e.tagName,e.id);return Object.entries(e.attributes).forEach((e=>{t.attr(e[1].name,e[1].value)})),t.node.append(...e.children),t}));return 0===i.length?null:i}}class o{static get mode(){return this._mode}static set mode(e){this._mode=e}static get scriptAsync(){return this._defaultScriptAsync}static set scriptAsync(e){this._defaultScriptAsync=e}static get useOptionContentForEmptyOptionValue(){return this._useOptionContentForEmptyOptionValue}static set useOptionContentForEmptyOptionValue(e){this._useOptionContentForEmptyOptionValue=e}static get defaultInputType(){return this._defaultInputType}static set defaultInputType(e){this._defaultInputType=e}static reset(){this._defaultInputType="text",this._useOptionContentForEmptyOptionValue=!0,this._defaultScriptAsync=!0}}o._defaultInputType="text",o._useOptionContentForEmptyOptionValue=!0,o._defaultScriptAsync=!0;class d extends n{constructor(e,t="bottom",i){super("figure",i),this.caption=new n("figcaption"),this.captionPlacement="bottom",s.isEmptyOrWhitespace(e)||this.caption.innerHTML(e),this.captionPlacement=t}clone(){const e=new d;return e.caption=this.caption,e.captionPlacement=this.captionPlacement,e.isCached=this.isCached,this.isHeadlessMode?e.hNode=this.hNode.clone():e.node=this.node.cloneNode(!0),e}build(){return this.isCached||(this.isCached=!0,"bottom"===this.captionPlacement?this.append(this.caption):this.prepend(this.caption)),this.node}buildHTML(){return this.isCached?this.isHeadlessMode?this.hNode.build():this.node.outerHTML:(this.isCached=!0,"bottom"===this.captionPlacement?this.append(this.caption):this.prepend(this.caption),this.hNode.build())}}class a extends n{constructor(e,t="_self",i){super("a",i),e=s.requireNonNull(e,"href"),t=s.requireNonNull(t,"target"),this.isHeadlessMode?(this.attr("href",e),this.attr("target",t)):(this.node.href=e,this.node.target=t)}hreflang(e){return this.isHeadlessMode?this.attr("hreflang",e):this.node.hreflang=e,this}mimeType(e){return this.isHeadlessMode?this.attr("type",e):this.node.type=e,this}ping(e){return this.isHeadlessMode?this.attr("ping",e.join(" ")):this.node.ping=e.join(" "),this}rel(e){return this.isHeadlessMode?this.attr("rel",e):this.node.rel=e,this}}class l extends n{constructor(e,t="default",i){super("area",i),e=s.requireNonNull(e,"coords"),this.isHeadlessMode?(this.attr("coords",e),s.isDefined(t)&&this.attr("shape",t)):(this.node.coords=e,s.isDefined(t)&&(this.node.shape=t))}href(e,t){return e=s.requireNonNull(e,"href"),t=s.requireNonNull(t,"alt"),this.isHeadlessMode?(this.attr("href",e),this.attr("alt",t)):(this.node.href=e,this.node.alt=t),this}hreflang(e){return this.attr("hreflang",e),this}ping(e){return this.isHeadlessMode?this.attr("ping",e.join(" ")):this.node.ping=e.join(" "),this}rel(e){return this.isHeadlessMode?this.attr("rel",e):this.node.rel=e,this}target(e){return this.isHeadlessMode?this.attr("target",e):this.node.target=e,this}}class h extends n{constructor(e,t){super("input",t),this.isHeadlessMode?(this.attr("spellcheck",!1),this.attr("checked",!1),this.attr("required",!1),this.attr("type",null!=e?e:o.defaultInputType)):(this.node.spellcheck=!1,this.node.checked=!1,this.node.required=!1,this.node.type=null!=e?e:o.defaultInputType)}autocomplete(e){return this.isHeadlessMode?this.attr("autocomplete",e):this.node.autocomplete=e,this}autofocus(){return this.isHeadlessMode?this.attr("autofocus",!0):this.node.autofocus=!0,this}datalist(e){return this.attr("list",s.requireNonNull(e,"id")),this}disabled(){return this.isHeadlessMode?this.attr("disabled",!0):this.node.disabled=!0,this}name(e){return this.isHeadlessMode?this.attr("name",e):this.node.name=e,this}onInvalid(e){return this.isHeadlessMode?this.attr("oninvalid",`this.setCustomValidity('${e}');`):this.node.setCustomValidity(e),this}placeholder(e){return this.isHeadlessMode?this.attr("placeholder",e):this.node.placeholder=e,this}readOnly(){return this.isHeadlessMode?this.attr("readonly",!0):this.node.readOnly=!0,this}required(){return this.isHeadlessMode?this.attr("required",!0):this.node.required=!0,this}value(e){return this.isHeadlessMode?this.attr("value",e):this.node.value=e,this}}class c extends h{constructor(e,t){super("number",t),s.isDefined(e)&&(this.isHeadlessMode?this.attr("value",e):this.node.value=e)}min(e){return this.isHeadlessMode?this.attr("min",e):this.node.min=e,this}max(e){return this.isHeadlessMode?this.attr("max",e):this.node.max=e,this}step(e){return this.isHeadlessMode?this.attr("step",e):this.node.step=e,this}}class u extends c{constructor(e,t){super(e,t),this.isHeadlessMode?this.attr("type","date"):this.node.type="date"}}class p extends h{constructor(e){super("text",e)}maxLength(e){return this.isHeadlessMode?this.attr("maxlength",e):this.node.maxLength=e,this}minLength(e){return this.isHeadlessMode?this.attr("minlength",e):this.node.minLength=e,this}pattern(e){const t=e instanceof RegExp?e.source:new RegExp(e).source;return this.isHeadlessMode?this.attr("pattern",t):this.node.pattern=t,this}size(e){return this.isHeadlessMode?this.attr("size",e):this.node.size=e,this}}class m extends n{constructor(e=!1,t=[],s){super("dl",s),this.div=null,!0===e&&(this.div=new n("div").classes(...t))}addTerm(e,...t){s.requireNonNull(e,"term in DLBuilder");const i=new n("dt").innerHTML(e),r=t.map((e=>e instanceof n?"DD"===e.tagName?e:new n("dd").append(e):new n("dd").innerHTML(e)));return null!==this.div?this.append(this.div.clone().append(i,...r)):this.append(i,...r),this}clone(){const e=new m(!1);return e.div=this.div,this.isHeadlessMode?e.hNode=this.hNode.clone():e.node=this.node.cloneNode(!0),e}}class y extends n{constructor(e,t,i){super("option",i),this.innerHTML(e),!s.isDefined(t)&&o.useOptionContentForEmptyOptionValue?this.attr("value",e.trim().toLowerCase().replace(/\s+/g,"-")):this.attr("value",s.ofNullable(t,""))}}class g extends n{constructor(e,t){super("li",t),this.innerHTML(s.ofNullable(e,""))}}class f extends n{constructor(e,t){super("audio",t),e=s.requireNonNull(e,"src"),this.isHeadlessMode?(this.attr("src",e),this.attr("controls",!0)):(this.node.src=e,this.node.controls=!0)}addFallbackSrc(e,t){return this.append(new w(e,t)),this}loop(){return this.isHeadlessMode?this.attr("loop",!0):this.node.loop=!0,this}muted(){return this.isHeadlessMode?this.attr("muted",!0):this.node.muted=!0,this}noControls(){return this.isHeadlessMode?this.attr("controls",!1):this.node.controls=!1,this}onNotSupported(e){return this.fallbackHTML=e,this}preload(e){return this.isHeadlessMode?this.attr("preload",e):this.node.preload=e,this}track(e,t,s=!1,i="en",r){return this.append(new n("track").attr("kind",t).attr("srclang",i).attr("src",e).attr("label",r).attr("default",s)),this}clone(){var e,t;const s=new f(null!=(t=null===(e=this.node)||void 0===e?void 0:e.src)?t:"",this.tagId);return s.fallbackHTML=this.fallbackHTML,s.isCached=this.isCached,this.isHeadlessMode?s.hNode=this.hNode.clone():s.node=this.node.cloneNode(!0),s}build(){return this.isCached||(this.isCached=!0,s.isDefined(this.fallbackHTML)&&this.append(this.fallbackHTML)),this.node}buildHTML(){return this.isCached||(this.isCached=!0,s.isDefined(this.fallbackHTML)&&this.append(this.fallbackHTML)),this.isHeadlessMode?this.hNode.build():this.node.outerHTML}}class b extends n{constructor(e,t){super("picture",t),this.img=e}source(...e){return this.append(...e),this}clone(){const e=new b(this.img);return e.isCached=this.isCached,e.img=this.img.clone(),this.isHeadlessMode?e.hNode=this.hNode.clone():e.node=this.node.cloneNode(!0),e}build(){return this.isCached||(this.isCached=!0,this.append(this.img)),this.node}buildHTML(){return this.isCached||(this.isCached=!0,this.append(this.img)),this.isHeadlessMode?this.hNode.build():this.node.outerHTML}}class w extends n{constructor(e,t,i){super("source",i),e=s.requireNonNull(e,"src"),t=s.requireNonNull(t,"type"),this.isHeadlessMode?(this.attr("src",e),this.attr("type",t)):(this.node.src=e,this.node.type=t)}media(e){return this.isHeadlessMode?this.attr("media",e):this.node.media=e,this}sizes(e){return this.isHeadlessMode?this.attr("sizes",e):this.node.sizes=e,this}srcset(e){return this.isHeadlessMode?this.attr("srcset",e):this.node.srcset=e,this}}class M extends n{constructor(e,t,i){super("video",i),e=s.requireNonNull(e,"src"),this.attr("type",s.requireNonNull(t,"type")),this.isHeadlessMode?(this.attr("src",e),this.attr("controls",!0)):(this.node.src=e,this.node.controls=!0)}addFallbackSrc(e,t){return this.append(new w(e,t)),this}loop(){return this.isHeadlessMode?this.attr("loop",!0):this.node.loop=!0,this}muted(){return this.isHeadlessMode?this.attr("muted",!0):this.node.muted=!0,this}noControls(){return this.isHeadlessMode?this.attr("controls",!1):this.node.controls=!1,this}onNotSupported(e){return this.fallbackHTML=e,this}poster(e){return e=s.requireNonNull(e,"poster"),this.isHeadlessMode?this.attr("poster",e):this.node.poster=e,this}preload(e){return this.isHeadlessMode?this.attr("preload",e):this.node.preload=e,this}track(e,t,s=!1,i="en",r){return this.append(new n("track").attr("kind",t).attr("srclang",i).attr("src",e).attr("label",r).attr("default",s)),this}clone(){var e,t,s,i;const r=new M(null!=(t=null===(e=this.node)||void 0===e?void 0:e.src)?t:"",null!=(i=null===(s=this.node)||void 0===s?void 0:s.getAttribute("type"))?i:"");return r.fallbackHTML=this.fallbackHTML,r.isCached=this.isCached,this.isHeadlessMode?r.hNode=this.hNode.clone():r.node=this.node.cloneNode(!0),r}build(){return this.isCached||(this.isCached=!0,s.isDefined(this.fallbackHTML)&&this.append(this.fallbackHTML)),this.node}buildHTML(){return this.isCached||(this.isCached=!0,this.append(this.fallbackHTML)),this.isHeadlessMode?this.hNode.build():this.node.outerHTML}}class H extends n{constructor(e,t){super("table",t),this.header=null,this.body=null,this.caption=null,this.colGroupBuilder=null,this.isHeadlessMode?(this.header=new n("tr"),this.body=new n("tbody")):(this.header=this.node.createTHead(),this.body=this.node.createTBody()),s.isEmptyOrWhitespace(e)||(this.isHeadlessMode?this.caption=new n("caption").innerHTML(e):(this.caption=this.node.createCaption(),this.caption.innerHTML=e))}addHeader(...e){if(0===e.length)return this;const t=e.map((e=>new n("th").innerHTML(e)));return this.isHeadlessMode?this.header.append(...t.map((e=>e.buildHTML()))):(null===this.node.tHead.firstChild&&this.node.tHead.append(new n("tr").build()),this.node.tHead.firstChild.append(...t.map((e=>e.build())))),this}addRow(...e){if(0===e.length)return this;const t=e.map((e=>new n("td").innerHTML(e)));return this.isHeadlessMode?this.body.append(new n("tr").append(...t)):this.body.append(new n("tr").append(...t).build()),this}colgroup(e){return this.colGroupBuilder=e,this}collapse(){return this.style({"border-collapse":"collapse"}),this}setHeaders(...e){return this.isHeadlessMode?this.header=new n("tr"):(this.node.deleteTHead(),this.header=this.node.createTHead()),e.length>0&&this.addHeader(...e),this}setRows(...e){return this.isHeadlessMode?this.body=new n("tbody"):this.body.innerHTML="",e.length>0&&e.forEach((e=>this.addRow(...e))),this}clone(){var e;const t=new H(null===(e=this.node)||void 0===e?void 0:e.caption.innerHTML);return t.isCached=this.isCached,t.body=this.body,t.header=this.header,t.colGroupBuilder=this.colGroupBuilder,this.isHeadlessMode?(t.caption=this.caption.clone(),t.hNode=this.hNode.clone(),t):(t.caption=t.node.createCaption(),t.caption.innerHTML=this.caption.innerHTML,t.node=this.node.cloneNode(!0),t)}build(){return this.isCached||(this.isCached=!0,this.buildSections()),this.node}buildHTML(){return this.isCached||(this.isCached=!0,this.buildSections()),this.isHeadlessMode?this.hNode.build():this.node.outerHTML}buildSections(){this.isHeadlessMode&&(this.append(new n("thead").append(this.header)),this.append(this.body)),this.isHeadlessMode&&null!==this.caption&&(null!==this.colGroupBuilder&&this.prepend(this.colGroupBuilder),this.prepend(this.caption)),null!==this.colGroupBuilder&&(this.isHeadlessMode||null===this.caption?this.isHeadlessMode?this.prepend(this.colGroupBuilder):this.node.prepend(this.colGroupBuilder.build()):this.caption.insertAdjacentElement("afterend",this.colGroupBuilder.build()))}}class N extends n{constructor(e){super("template",e),this.styleBuilder=null,s.requireNonNull(e,"id in Template Builder")}addStylesToRoot(e){return s.isDefined(e)?(null!==this.styleBuilder?this.styleBuilder.append(e):this.styleBuilder=new n("style").innerText(e),this):this}addSlots(...e){return s.isDefined(e)&&0!==e.length?(this.append(...e),this):this}clone(){const e=new N(this.tagId);return e.isCached=this.isCached,null!==this.styleBuilder&&(e.styleBuilder=this.styleBuilder.clone()),this.isHeadlessMode?e.hNode=this.hNode.clone():e.node=this.node.cloneNode(!0),e}buildHTML(){return this.isCached?this.hNode.build():(this.isCached=!0,this.prepend(this.styleBuilder),this.isHeadlessMode?this.hNode.build():this.build().outerHTML)}build(){return this.isCached||(this.isCached=!0,this.prepend(this.styleBuilder)),this.node}}class v extends r{constructor(e,t,i="http://www.w3.org/2000/svg"){super("svg",t,i),s.isEmptyOrWhitespace(i)&&s.requireNonNull(null,"xmlns"),s.isEmptyOrWhitespace(e)||this.attr("viewBox",e)}bounds(e,t){return this.width(e),this.height(t),this}height(e){return this.attr("height",e),this}width(e){return this.attr("width",e),this}clone(){const e=new v;return e.isCached=this.isCached,this.isHeadlessMode?e.hNode=this.hNode.clone():e.node=this.node.cloneNode(!0),e}}class x extends r{constructor(e,t="http://www.w3.org/2000/svg",i){super(e,i,t),s.isEmptyOrWhitespace(t)&&s.requireNonNull(null,"xmlns")}fill(e){return this.attr("fill",e),this}stroke(e,t){return this.attr("stroke",e),this.attr("stroke-width",t),this}width(e){return this.attr("width",e),this}height(e){return this.attr("height",e),this}bounds(e,t){return this.width(e),this.height(t),this}preserveAspectRatio(e){return this.attr("preserveAspectRatio",e),this}x(e){return this.attr("x",e),this}y(e){return this.attr("y",e),this}viewBox(e){return this.attr("viewBox",e),this}clone(){const e=new x(this.tagName);return e.isCached=this.isCached,this.isHeadlessMode?e.hNode=this.hNode.clone():e.node=this.node.cloneNode(!0),e}}e.exports&&(e.exports={TagBuilder:n,TagBuilderOptions:o,Objects:s,BlockquoteBuilder:class extends n{constructor(e,t){super("blockquote",t),this.isHeadlessMode?this.attr("cite",e):this.node.cite=e}},FieldsetBuilder:class extends n{constructor(e,t){super("fieldset",t),s.isEmptyOrWhitespace(e)||this.append(new n("legend").innerText(e))}},FigureBuilder:d,AnchorBuilder:a,DownloadLinkBuilder:class extends a{constructor(e,t,i){super(e,"_self",i),t=s.requireNonNull(t,"filename in DownloadLinkBuilder"),this.isHeadlessMode?this.attr("download",t):this.node.download=t}},AreaBuilder:l,DownloadAreaBuilder:class extends l{constructor(e,t,i="default",r){super(t,i,r),e=s.requireNonNull(e,"filename in DownloadAreaBuilder"),this.isHeadlessMode?this.attr("download",e):this.node.download=e}},DataBuilder:class extends n{constructor(e,t){super("data",t),this.isHeadlessMode?this.attr("value",e):this.node.value=e}},SpanBuilder:class extends n{constructor(e,t){super("span",t),s.isDefined(e)&&(e.sort(),e.forEach((e=>{"bold"===e?this.bold():"bolder"===e?this.bolder():"lighter"===e?this.lighter():"italic"===e?this.italic():"underline"===e?this.underline():"strikethrough"===e&&this.strikethrough()})))}bold(){return this.style({"font-weight":"bold"}),this}bolder(){return this.style({"font-weight":"bolder"}),this}italic(){return this.style({"font-style":"italic"}),this}lighter(){return this.style({"font-weight":"lighter"}),this}underline(){return this.style({"text-decoration":"underline"}),this}strikethrough(){return this.style({"text-decoration":"strikethrough"}),this}color(e){return this.style({color:e}),this}},InputBuilder:h,NumberInputBuilder:c,CheckboxInputBuilder:class extends h{constructor(e=!1,t){super("checkbox",t),this.isHeadlessMode||(this.node.indeterminate=e)}checked(){return this.isHeadlessMode?this.attr("checked",!0):this.node.checked=!0,this}},RadioInputBuilder:class extends h{constructor(e,t){super("radio",t),e=s.ofNullable(e,!1),this.isHeadlessMode?this.attr("checked",e):this.node.checked=e}},RangeInputBuilder:class extends c{constructor(e,t){super(e,t),this.isHeadlessMode?this.attr("type","range"):this.node.type="range"}},DateInputBuilder:u,DateTimeLocalInputBuilder:class extends u{constructor(e,t){super(e,t),this.isHeadlessMode?this.attr("type","datetime-local"):this.node.type="datetime-local"}},MonthInputBuilder:class extends u{constructor(e,t){super(e,t),this.isHeadlessMode?this.attr("type","month"):this.node.type="month"}},TimeInputBuilder:class extends u{constructor(e,t){super(e,t),this.isHeadlessMode?this.attr("type","time"):this.node.type="time"}},WeekInputBuilder:class extends u{constructor(e,t){super(e,t),this.isHeadlessMode?this.attr("type","week"):this.node.type="week"}},FileInputBuilder:class extends h{constructor(e,t){super("file",t),this.isHeadlessMode?(this.attr("multiple",!1),this.attr("accept",s.ofNullable(e,""))):(this.node.multiple=!1,s.isDefined(e)&&(this.node.accept=e))}capture(e){return this.attr("capture",e),this}multiple(){return this.isHeadlessMode?this.attr("multiple",!0):this.node.multiple=!0,this}},ImageInputBuilder:class extends h{constructor(e,t,i){super("image",i),e=s.requireNonNull(e,"src"),t=s.requireNonNull(t,"alt"),this.isHeadlessMode?(this.attr("src",e),this.attr("alt",t)):(this.node.src=e,this.node.alt=t)}formAction(e){return this.isHeadlessMode?this.attr("formaction",e):this.node.formAction=e,this}formEnctype(e){return e=s.ofNullable(e,"application/x-www-form-urlencoded"),this.isHeadlessMode?this.attr("formenctype",e):this.node.formEnctype=e,this}formMethod(e){return this.isHeadlessMode?this.attr("formmethod",e):this.node.formMethod=e,this}},TextInputBuilder:p,EmailInputBuilder:class extends p{constructor(e){super(e),this.isHeadlessMode?(this.attr("type","email"),this.attr("multiple",!1)):(this.node.type="email",this.node.multiple=!1)}multiple(){return this.isHeadlessMode?this.attr("multiple",!0):this.node.multiple=!0,this}},PasswordInputBuilder:class extends p{constructor(e){super(e),this.isHeadlessMode?this.attr("type","password"):this.node.type="password"}},SearchInputBuilder:class extends p{constructor(e){super(e),this.isHeadlessMode?this.attr("type","search"):this.node.type="search"}},TelInputBuilder:class extends p{constructor(e){super(e),this.isHeadlessMode?this.attr("type","tel"):this.node.type="tel"}},UrlInputBuilder:class extends p{constructor(e){super(e),this.isHeadlessMode?this.attr("type","url"):this.node.type="url"}},TextAreaBuilder:class extends n{constructor(e,t,i){super("textarea",i),this.isHeadlessMode?(this.attr("spellcheck",!1),this.attr("required",!1),s.isDefined(e)&&this.attr("rows",e),s.isDefined(t)&&this.attr("cols",t)):(this.node.spellcheck=!1,this.node.required=!1,s.isDefined(e)&&(this.node.rows=e),s.isDefined(t)&&(this.node.cols=t))}autocomplete(e){return this.isHeadlessMode?this.attr("autocomplete",e):this.node.autocomplete=e,this}autofocus(){return this.isHeadlessMode?this.attr("autofocus",!0):this.node.autofocus=!0,this}disabled(){return this.isHeadlessMode?this.attr("disabled",!0):this.node.disabled=!0,this}maxLength(e){return this.isHeadlessMode?this.attr("maxlength",e):this.node.maxLength=e,this}minLength(e){return this.isHeadlessMode?this.attr("minlength",e):this.node.minLength=e,this}name(e){return this.isHeadlessMode?this.attr("name",e):this.node.name=e,this}onInvalid(e){return this.isHeadlessMode?this.attr("oninvalid",`this.setCustomValidity('${e}');`):this.node.setCustomValidity(e),this}placeholder(e){return this.isHeadlessMode?this.attr("placeholder",e):this.node.placeholder=e,this}readOnly(){return this.isHeadlessMode?this.attr("readonly",!0):this.node.readOnly=!0,this}required(){return this.isHeadlessMode?this.attr("required",!0):this.node.required=!0,this}value(e){return this.isHeadlessMode?this.attr("value",e):this.node.value=e,this}wrap(e){return this.isHeadlessMode?this.attr("wrap",e):this.node.wrap=e,this}},DataListBuilder:class extends n{constructor(e){super("datalist",e),s.requireNonNull(e,"id in DatalistBuilder")}addOption(e,t,i=[]){return s.requireNonNull(e,"content in DatalistBuilder"),this.addOptions(new y(e,t).classes(...i)),this}addOptions(...e){return e.forEach((e=>{e instanceof y?this.append(e):this.append(new y(e))})),this}},DLBuilder:m,DetailsBuilder:class extends n{constructor(e,t=!1,i){super("details",i),this.isHeadlessMode?this.attr("open",t):this.node.open=t,s.isDefined(e)&&this.prepend(new n("summary").innerHTML(e))}},OptionBuilder:y,SelectBuilder:class extends n{constructor(e,t){super("select",t),this.isHeadlessMode?(this.attr("spellcheck",!1),this.attr("required",!1)):(this.node.spellcheck=!1,this.node.required=!1),s.isDefined(e)&&this.append(new y(e,"").attr("disabled",""))}addOptionGroup(e,...t){return s.requireNonNull(e,"label in SelectBuilder"),this.append(new n("optgroup").attr("label",e).append(...t)),this}addOption(e,t,s){return this.addOptions([new y(e,t).classes(...s)]),this}addOptions(e){return e.forEach((e=>{e instanceof y?this.append(e):this.append(new y(e))})),this}autocomplete(e){return this.isHeadlessMode?this.attr("autocomplete",e):this.node.autocomplete=e,this}autofocus(){return this.isHeadlessMode?this.attr("autofocus",!0):this.node.autofocus=!0,this}disabled(){return this.isHeadlessMode?this.attr("disabled",!0):this.node.disabled=!0,this}multiple(){return this.isHeadlessMode?this.attr("multiple",!0):this.node.multiple=!0,this}name(e){return this.isHeadlessMode?this.attr("name",e):this.node.name=e,this}onInvalid(e){return this.isHeadlessMode?this.attr("oninvalid",`this.setCustomValidity('${e}');`):this.node.setCustomValidity(e),this}required(){return this.isHeadlessMode?this.attr("required",!0):this.node.required=!0,this}size(e){return this.isHeadlessMode?this.attr("size",e):this.node.size=e,this}},ListItemBuilder:g,ListBuilder:class extends n{constructor(e=!1,t="none",i){super(e?"ol":"ul",i),s.isDefined(t)&&"none"!==t.toLowerCase()&&this.style({"list-style":t})}addItem(e){return e instanceof g?this.append(e):this.append(new g(e)),this}addItems(e){return e.forEach((e=>this.addItem(e))),this}addSublist(e){return this.append(new n("li").append(e)),this}},SourceBuilder:w,AudioBuilder:f,EmbedBuilder:class extends n{constructor(e,t,i){super("embed",i),e=s.requireNonNull(e,"src in EmbedBuilder"),t=s.requireNonNull(t,"type in EmbedBuilder"),this.isHeadlessMode?(this.attr("src",e),this.attr("type",t)):(this.node.src=e,this.node.type=t)}},IframeBuilder:class extends n{constructor(e,t){super("iframe",t),e=s.requireNonNull(e,"src"),this.isHeadlessMode?this.attr("src",e):this.node.src=e}allow(e){return this.isHeadlessMode?this.attr("allow",e):this.node.allow=e,this}referrerPolicy(e="no-referrer-when-downgrade"){return e=s.ofNullable(e,"no-referrer-when-downgrade"),this.isHeadlessMode?this.attr("referrerpolicy",e):this.node.referrerPolicy=e,this}sandbox(e=""){return this.attr("sandbox",e),this}srcdoc(e){return this.isHeadlessMode?this.attr("srcdoc",e):this.node.srcdoc=e,this}},ImageBuilder:class extends n{constructor(e,t,i){super("img",i),e=s.requireNonNull(e,"src"),t=s.requireNonNull(t,"alt"),this.isHeadlessMode?(this.attr("src",e),this.attr("alt",t),this.attr("title",t)):(this.node.src=e,this.node.alt=t,this.node.title=t)}decoding(e){return this.isHeadlessMode?this.attr("decoding",e):this.node.decoding=e,this}sizes(e){return this.isHeadlessMode?this.attr("sizes",e):this.node.sizes=e,this}srcset(e){return this.isHeadlessMode?this.attr("srcset",e):this.node.srcset=e,this}},PictureBuilder:b,VideoBuilder:M,MeterBuilder:class extends n{constructor(e){super("meter",e)}min(e){return this.isHeadlessMode?this.attr("min",e):this.node.min=e,this}max(e){return this.isHeadlessMode?this.attr("max",e):this.node.max=e,this}minmax(e,t){return this.min(e).max(t)}low(e){return this.isHeadlessMode?this.attr("low",e):this.node.low=e,this}high(e){return this.isHeadlessMode?this.attr("high",e):this.node.high=e,this}lowhigh(e,t){return this.low(e).high(t)}optimum(e){return this.isHeadlessMode?this.attr("optimum",e):this.node.optimum=e,this}},ProgressBuilder:class extends n{constructor(e,t){super("progress",t),e=s.requireNonNull(e,"value"),this.isHeadlessMode?this.attr("value",e):this.node.value=e}max(e){return this.isHeadlessMode?this.attr("max",e):this.node.max=e,this}},FormBuilder:class extends n{constructor(e,t="get",i){super("form",i),t=s.ofNullable(t,"get"),e=s.requireNonNull(e,"actionUrl of FormBuilder"),this.isHeadlessMode?(this.attr("method",t),this.attr("action",e)):(this.node.method=t,this.node.action=e)}acceptCharset(...e){return this.isHeadlessMode?this.attr("acceptcharset",e.join(" ")):this.node.acceptCharset=e.join(" "),this}enctype(e){return e=s.ofNullable(e,"application/x-www-form-urlencoded"),this.isHeadlessMode?this.attr("enctype",e):this.node.enctype=e,this}rel(e){return this.attr("rel",e),this}target(e){return this.isHeadlessMode?this.attr("target",e):this.node.target=e,this}noValidate(){return this.isHeadlessMode?this.attr("novalidate",!0):this.node.noValidate=!0,this}},ScriptBuilder:class extends n{constructor(e){super("script",e),this.isHeadlessMode?this.attr("async",o.scriptAsync):this.node.async=o.scriptAsync}async(){return this.isHeadlessMode?this.attr("async",!0):this.node.async=!0,this}crossOrigin(e){return e=s.ofNullable(e,""),this.isHeadlessMode?this.attr("crossorigin",e):this.node.crossOrigin=e,this}defer(){return this.isHeadlessMode?this.attr("defer",!0):this.node.defer=!0,this}integrity(e){return this.isHeadlessMode?this.attr("integrity",e):this.node.integrity=e,this}noModule(){return this.isHeadlessMode?this.attr("nomodule",!0):this.node.noModule=!0,this}nonce(e){return this.isHeadlessMode?this.attr("nonce",e):this.node.nonce=e,this}referrerPolicy(e){return e=s.ofNullable(e,""),this.isHeadlessMode?this.attr("referrerpolicy",e):this.node.referrerPolicy=e,this}src(e){return this.isHeadlessMode?this.attr("src",e):this.node.src=e,this}type(e){return this.isHeadlessMode?this.attr("type",e):this.node.type=e,this}},ColGroupBuilder:class extends n{constructor(e){super("colgroup",e)}addCol(e,...t){const i=new n("col").classes(...t);return s.isDefined(e)&&i.attr("span",e),this.append(i),this}},TableBuilder:H,SlotBuilder:class extends n{constructor(e,t,i){super("slot",i),s.requireNonNull(t,"content in SlotBuilder"),e=s.requireNonNull(e,"name in SlotBuilder"),this.isHeadlessMode?this.hNode.attr("name",e):this.node.name=e,this.append(t)}},TemplateBuilder:N,SVGBuilder:v,SVGElementBuilder:x})}},t={};function s(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}(()=>{"use strict";const e={extend:function(e){return Object.freeze(Object.assign(this,e))}};class t{static get(e,t={}){const s=new URLSearchParams([...Object.entries(t)]);return r(`${e}?${s.toString()}`,{expectingStatus:200})}static getPage(e,t=[0,0],s=15,i={}){const n=new URLSearchParams([["cursor",t||[0,0]],["limit",s||15],...Object.entries(i)]);return r(`${e}?${n.toString()}`,{expectingStatus:200})}static post(e,t,s=void 0,i=void 0){const n=s?`?${new URLSearchParams(Object.entries(s)).toString()}`:"";return r(e+n,{method:"POST",expectingStatus:i||[200,201],contentType:t?"application/json":"text/plain"})}static delete(e){return r(e,{method:"DELETE",expectingStatus:204,contentType:"text/plain"})}static put(e,t=void 0,s=void 0){const i={method:"PUT",expectingStatus:s||200,contentType:"text/plain"};return t&&(i.contentType="application/json",i.body=JSON.stringify(t)),r(e,i)}static patch(e,t=void 0){return r(e,{method:"PATCH",expectingStatus:t,contentType:"text/plain"})}}class i extends Error{constructor(e,t=null){super(),this.status=e.status,this.statusText=e.statusText||null,this.body=t||null}}const r=(e,{method:t="GET",expectingStatus:s,contentType:r="application/json",body:n})=>Promise.resolve(fetch(e,{method:t,body:n,headers:{"Content-Type":r}}).then((async e=>{if(void 0!==s){if(Array.isArray(s)&&!s.includes(e.status))throw new i(e,await e.text());if(s!==e.status)throw new i(e,await e.text())}else if(!s&&!e.ok)throw new i(e.status,e.statusText,await e.text());return e})).then((e=>r.includes("json")?e.json():e.text()))),n=e.extend({UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5});class o{static init(){const e=document.createElement("script");return e.type="text/javascript",e.src="https://www.youtube.com/iframe_api",new Promise((async s=>{(await t.get("/settings")).youtubeIframeAPIEnabled?(document.body.appendChild(e),window.onYouTubeIframeAPIReady=s):s()}))}static newInstance(e){const t=document.getElementById(e);return new YT.Player(e,{events:{onReady:e=>o.onPlayerReady(e,t),onStateChange:e=>o.onPlayerStateChange(e.data,t)}})}static onPlayerReady(e,t){}static async onPlayerStateChange(e,s){if(e===n.ENDED){const e=s.closest(".entry").parentElement;if((await t.get("/settings")).youtubeIframeAPIAutoplay){const s=e.querySelector("yt-image-video").formData;t.post(`/video/${s.videoId}/watched`,!1,s,201).catch(console.error).finally((async()=>{if(e.nextSibling){const{nextSibling:t}=e;document.fullscreenElement&&await document.exitFullscreen(),e.classList.remove("theatre"),t.querySelector("img").click()}else if(document.getElementById("dropdown-video-category").querySelector("button").innerText.startsWith("Collections")){const t=e.closest("section").querySelector(".entry");document.fullscreenElement&&await document.exitFullscreen(),e.classList.remove("theatre"),null!==t.querySelector("img")?t.querySelector("img").click():t.querySelector("yt-image-video").play()}}))}}}}window.onkeydown=e=>{"Escape"===e.key&&null!==document.querySelector(".entry-container.theatre")&&document.querySelector(".entry-container.theatre").classList.toggle("theatre")},window.onclick=e=>{const{target:t}=e;t.classList.contains("details")&&t.closest(".entry-container").classList.contains("theatre")&&t.closest(".entry-container").classList.remove("theatre"),t.classList.contains("theatre")&&t.classList.contains("entry-container")&&t.classList.remove("theatre")},o.init().then((()=>console.log("YouTube Iframe API Ready or resolved because not permitted")));var d=s(225);class a extends d.TagBuilder{constructor(e,t){super("div",t),this.classes("empty","text-gray"),this.style({background:"none"}),this.append(new d.TagBuilder("p").classes("empty-title","h5").innerHTML(e))}}class l extends d.TagBuilder{constructor(e,t){super("div","loadMore"),this.classes("grid-col-span-all"),this.append(new d.TagBuilder("button").classes("btn","btn-link").innerText("Load More").on("click",(async()=>{const s=document.getElementById("loadMore");e.removeChild(s),e.append(new d.TagBuilder("div").classes("empty","text-gray","grid-col-span-all").style({background:"none"}).append(new d.TagBuilder("p").classes("empty-title","h5").append(new d.TagBuilder("button").classes("btn","btn-link","btn-lg","loading").attr("disabled",!0))).build()),e.scrollTo(0,e.scrollHeight),await Promise.resolve(t())})))}}const h=Object.freeze({main:{menu:{target:document.querySelector("header .dropdown"),ul:document.querySelector("header .dropdown .menu")},videos:{target:document.querySelector("main section"),loadMoreBtn:document.getElementById("loadMore")},aside:{target:document.querySelector("aside"),ul:document.querySelector("aside ul"),search:document.querySelector("#query input"),searchDataList:document.querySelector("#dl-channels")},toolbar:{target:document.getElementById("toolbar"),dropdown:document.getElementById("dropdown-video-category"),dropdownBtn:document.querySelector("#dropdown-video-category button.dropdown-toggle"),todayFilterGroup:document.getElementById("todayFilterGroup")}}});class c extends d.TagBuilder{constructor(e){super("div"),this.classes("actions"),this.entry=e;const t=e;delete t.entry,this.formData=t}withTheatreModeAction(e=".entry-container"){return this.append(new d.TagBuilder("button").style({display:"none"}).classes("tooltip","tooltip-left","theatre","btn","btn-sm","btn-link").attr("data-tooltip","Toggle theatre mode").innerHTML('<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 24 24" width="20px" fill="#000000" style="margin-top:2px;"><path d="M9 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H9v1zm3-19C8.14 2 5 5.14 5 9c0 2.38 1.19 4.47 3 5.74V17c0 .55.45 1 1 1h6c.55 0 1-.45 1-1v-2.26c1.81-1.27 3-3.36 3-5.74 0-3.86-3.14-7-7-7zm2.85 11.1l-.85.6V16h-4v-2.3l-.85-.6C7.8 12.16 7 10.63 7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.63-.8 3.16-2.15 4.1z" fill="rgb(170,170,170)"/></svg>').on("click",(t=>{t.target.closest(e).classList.toggle("theatre")}))),this}withBookmarkAction(){return this.append(new d.TagBuilder("button").style({"user-select":"none"}).attr("class",this.entry.isBookmarked?"bookmark-filled":"").classes("tooltip","tooltip-left","btn","btn-sm","btn-link","bookmark").attr("data-tooltip","Toggle bookmark").on("click",(({target:e})=>{e.classList.add("loading"),this.entry.isBookmarked?t.delete(`/bookmark/${this.entry.videoId}`).then((()=>{this.entry.isBookmarked=!1,e.classList.remove("loading"),e.classList.remove("bookmark-filled")})).catch((t=>{console.error(t),e.classList.remove("loading")})):t.post(`/bookmark/${this.entry.videoId}`,!1,this.formData,201).then((()=>{this.entry.isBookmarked=!0,e.classList.remove("loading"),e.classList.add("bookmark-filled")})).catch((t=>{console.error(t),e.classList.remove("loading")}))}))),this}withDropdownItems(...e){return this.append(new d.TagBuilder("div").classes("dropdown","dropdown-right","tooltip","tooltip-left").attr("data-tooltip","More").append(new d.TagBuilder("a").classes("dropdown-toggle","c-hand").tabIndex(0).append(new d.TagBuilder("i").classes("icon","icon-more-vert").width("18px")),(new d.ListBuilder).classes("menu").append(...e))),this}}class u extends HTMLElement{constructor(e=""){super("div"),this.classList.add("modal"),this.classList.add("modal-sm"),this.classList.add("modal-template"),this.innerHTML=`<a href="#" class="modal-overlay" aria-label="Close"></a>\n            <div class="modal-container">\n                <div class="modal-header">\n                    <a href="#" class="btn btn-clear float-right" aria-label="Close"></a>\n                    <div class="modal-title h5">${e}</div>\n                </div>\n                <div class="modal-body">\n                    <div class="content">\n                        <form>\n                        </form>\n                    </div>\n                </div>\n                <div class="modal-footer"></div>\n            </div>\n        `,[...this.querySelectorAll("a.modal-overlay, a.btn.btn-clear")].forEach((e=>e.addEventListener("click",(()=>this.close())))),window.onkeydown=e=>{"Escape"===e.key&&this.close()}}addFormInput(e,t){const s=document.createElement("label");s.textContent=e,s.append(t.build()),this.querySelector("form").append(s),s.onchange=({target:e})=>{e.setCustomValidity("")}}setBody(e){this.querySelector("form").innerHTML=e}setFooter(e){this.querySelector(".modal-footer").innerHTML=e}close(){document.body.removeChild(document.querySelector(".modal-template"))}}class p extends u{constructor(e,s){super("Add To Collection");const i="<form>"+new d.TagBuilder("span").classes("text-error").buildHTML()+new d.TagBuilder("button").classes("btn","btn-link").innerHTML("Save").buildHTML()+"</form>";this.setFooter(i);const r=new d.SelectBuilder("Choose a collection").classes("form-input"),n=e.filter((e=>!e.videos.includes(s.videoId)));if(0===n.length)return this.querySelector(".modal-footer span.text-error").innerHTML="No collections available",this.setBody(r.buildHTML()),void(this.querySelector("option").selected=!0);n.forEach((e=>r.addOption(e.name,e.id,[]))),this.querySelector(".modal-footer form").onsubmit=e=>{e.preventDefault();const i=e.target.closest(".modal-container").querySelector("select"),r=i.options[i.selectedIndex].value;if(0===r.length)return;const n=e.target.querySelector("button");n.classList.add("loading"),t.post(`/collection/${r}/association`,!1,s,201).then((()=>this.close())).catch((e=>{400===e.status&&(n.classList.remove("loading"),this.querySelector(".modal-footer span.text-error").innerHTML=e.statusText)}))},this.setBody(r.buildHTML()),this.querySelector("option").selected=!0}}window.customElements.define("select-collection-modal",p);class m{static handleAddToCollectionAction(e){t.get("/collection",{sortDir:"asc"}).then((t=>document.body.appendChild(new p(t,e)))).catch(console.error)}}const y=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),g=new Intl.DateTimeFormat("en-US",{day:"numeric",month:"short",year:"numeric"});class f{static transformViews(e){const t=new Intl.NumberFormat("en-US",{maximumSignificantDigits:4}).format(e).split(","),s=t.shift();let i="";if(t.length>0)switch(t.length){case 1:i="K";break;case 2:i=`.${t[0]}M`;break;case 3:i=`.${t[0]}B`;break;case 4:i=`.${t[0]}T`}return s+i}static transformPublishDate(e){const t=new Date(e),s=(new Date-t)/864e5;if(s<1){const e=24*s;return e<1?y.format(-Math.round(60*e),"minutes"):y.format(-Math.round(e),"hours")}if(Math.round(s)<8){const e=y.format(-Math.round(s),"days");return e.charAt(0).toUpperCase()+e.substring(1)}return g.format(t)}}class b extends HTMLElement{constructor(e){super(),this.entry=e,this.append(new d.ImageBuilder(e.thumbnail,`Image for ${e.title}`).on("click",async function({target:s}){document.querySelectorAll("yt-image-video").forEach((e=>e.stop())),s.replaceWith(new d.IframeBuilder(`https://www.youtube-nocookie.com/embed/${e.videoId}?enablejsapi=1&autoplay=1&modestbranding=1`,`v${e.videoId}`).attr("frameborder",0).attr("allow","autoplay; encrypted-media; picture-in-picture; fullscreen").attr("allowfullscreen",!0).build());const i=await t.get("/settings");i.youtubeIframeAPIEnabled&&setTimeout((()=>{this.player=o.newInstance(`v${e.videoId}`)}),25),document.querySelector(`.entry[data-videoId="${e.videoId}"]`).querySelector("button.theatre").style.display="inline-block",i.autoTheatreMode&&document.querySelector(`.entry[data-videoId="${e.videoId}"]`).querySelector("button.theatre").click()}.bind(this)).build())}play(){this.player&&this.player.playVideo()}pause(){this.player&&this.player.pauseVideo()}mute(){this.player&&this.player.mute()}unmute(){this.player&&this.player.unMute()}stop(){this.player&&this.player.stopVideo()}hideVideoInfo(){this.player&&this.player.hideVideoInfo()}get formData(){return{videoId:this.entry.videoId,channelId:this.entry.channelId,publishedDate:this.entry.publishedDate,title:this.entry.title,author:this.entry.author,description:this.entry.description}}}customElements.define("yt-image-video",b);class w extends d.TagBuilder{constructor(e){super("div"),this.classes("entry-container");const t=e;delete t.entry,this.formData=t,this.entry=e;let s=e.title.substring(0,80);e.title.length>80&&(s+=" ..."),this.append(new d.TagBuilder("div").classes("entry").attr("data-videoId",e.videoId).attr("data-channelId",e.channelId).append((new d.FigureBuilder).append(new b(e)).margin(0).padding(0),new d.TagBuilder("div").classes("details").position("relative").append(new d.TagBuilder("h3").innerText(s).title(e.title),new d.TagBuilder("div").classes("byline").append(new d.AnchorBuilder(`/channel/${e.channelId}/${e.author}`).innerText(e.author)),new d.ListBuilder(!1,"none").classes("metadata").append(new d.ListItemBuilder(f.transformPublishDate(e.publishedDate))))))}withActions(e){return this.actionBuilder=e,this}build(){return this.actionBuilder&&this.node.querySelector("div.details").append(this.actionBuilder.build()),this.node}}class M extends w{constructor(e){super(e),this.withActions(new c(e).withTheatreModeAction().withBookmarkAction().withDropdownItems(new d.ListItemBuilder("Mark as Watched").classes("menu-item").on("click",(({target:s})=>{s.classList.toggle("loading"),t.post(`/video/${e.videoId}/watched`,!1,e,201).then((()=>{document.querySelector(`[data-videoId="${e.videoId}"]`).parentElement.remove()})).catch((e=>{console.error(e),s.classList.remove("loading")}))})),new d.ListItemBuilder("Hide").classes("menu-item").on("click",(()=>{0===document.querySelectorAll(".entry").length&&h.main.videos.target.appendChild(new a("End of videos","loadMore").build()),document.querySelector(`[data-videoId="${e.videoId}"]`).parentElement.remove()})),new d.ListItemBuilder("").classes("divider"),new d.ListItemBuilder("Add To Collection").classes("menu-item").on("click",(()=>m.handleAddToCollectionAction(this.formData)))))}}class H{static clearAndDisplayLoading(e){e.innerHTML="",e.append(new a('<button class="btn btn-link btn-lg loading" disabled></button>').build())}static clearAndDisplayNoneFound(e,t){e.innerHTML="",e.append(new a(t||"No videos found").build())}static loadPageableEntriesForTarget(e,t,s,i=0){H.clearAndDisplayLoading(t);const r=(e,i=0)=>{if(0!==(e=e.slice(i,i+15)).length||0!==i)if(0===e.length){const e=document.getElementById("loadMoreBtn");e&&t.removeChild(e)}else 0===i&&(t.innerHTML=""),e.forEach((e=>{t.append(Reflect.construct(s,[e]).build())})),e.slice(i+15).length>0&&t.append(new l(t,(()=>{r(e,i+1)})));else H.clearAndDisplayNoneFound(t)};r(e,i)}static loadUnwatchedForToday(e,s=[0,0],i=!1){const r=e;H.clearAndDisplayLoading(r);const n=async e=>{const s=await t.get("/settings");t.getPage(`/subscription/today/${i}`,e,15,{dayRange:s.newVideoDateRange}).then((t=>{const s=document.getElementById("loadMore");if(s&&r.remove(s),0===t.results.length&&0===e[0])H.clearAndDisplayNoneFound(r);else{document.querySelectorAll("div.empty").forEach((e=>e.parentElement.removeChild(e)));const e=t.results.sort(((e,t)=>new Date(t.publishedDate)-new Date(e.publishedDate)));r.append(...e.map((e=>new M(e).build())))}t.isComplete||r.append(new l(r,(()=>{n(t.cursor)})).build())})).catch((t=>{console.error("Frontend error fetching today",t),document.querySelector("div.empty").remove(),0===e[0]&&H.clearAndDisplayNoneFound(r,"Error fetching entries")}))};n(s)}}class N extends w{constructor(e){super(e),this.withActions(new c(e).withTheatreModeAction().withBookmarkAction().withDropdownItems(new d.ListItemBuilder("Add To Collection").classes("menu-item").on("click",(()=>m.handleAddToCollectionAction(this.formData)))))}}const v=document.querySelector("section");H.clearAndDisplayLoading(v),t.getPage(`/channel/${v.id}`,0).then((e=>{v.innerHTML="",v.append(...e.entries.sort(((e,t)=>new Date(t.publishedDate).getTime()-new Date(e.publishedDate).getTime())).map((e=>new N(e).build())))})).catch((e=>{console.error(e),H.clearAndDisplayNoneFound(v,`'${window.location.pathname}' Not Found`)})),document.querySelector("h1 button").addEventListener("click",(({target:e})=>{e.classList.add("loading"),confirm("Are you sure you want to unsubscribe?")?t.delete(`/subscription/${v.id}`,{method:"DELETE"}).then((()=>{window.location="/"})).catch((t=>{console.error(t),e.classList.remove("loading")})):e.classList.remove("loading")}))})()})();
//# sourceMappingURL=channel.min.js.map